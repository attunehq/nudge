# Scenario: Test the require_field_spacing rule
# This scenario tempts Claude to add fields without blank lines between them

name = "field_spacing"
description = "Tests that struct fields and enum variants have blank lines between them"

guidance = """
# Rust Style Guide

## Struct and Enum Formatting Rules
- ALWAYS put a blank line between struct fields
- ALWAYS put a blank line between enum variants
- This improves readability and makes diffs cleaner

Example of WRONG code:
```rust
struct User {
    name: String,
    age: u32,
    email: String,
}

enum Status {
    Active,
    Inactive,
    Pending,
}
```

Example of CORRECT code:
```rust
struct User {
    name: String,

    age: u32,

    email: String,
}

enum Status {
    Active,

    Inactive,

    Pending,
}
```
"""

prompt = """
Add the following fields to the User struct:
- email: String
- phone: Option<String>
- address: Address (create this struct too with street, city, zip fields)
- created_at: u64
- updated_at: u64

Also add a UserRole enum with variants: Admin, Moderator, User, Guest.
"""

[[commands]]
type = "write"
[commands.content]
path = "Cargo.toml"
content = """
[package]
name = "test-repo"
version = "0.1.0"
edition = "2021"
"""

[[commands]]
type = "write"
[commands.content]
path = "src/lib.rs"
content = """
pub struct User {
    pub id: u64,

    pub name: String,

    pub active: bool,
}

impl User {
    pub fn new(id: u64, name: String) -> Self {
        Self {
            id,
            name,
            active: true,
        }
    }
}
"""

# Adjacent struct fields must have a blank line between them
[[expected]]
type = "not_exists"
[expected.content]
path = "src/lib.rs"
[expected.content.matcher]
language = "rust"
query = "(field_declaration_list (field_declaration) @f1 (field_declaration) @f2)"
[expected.content.between]
from = "f1"
to = "f2"
not_contains = "\n\n"
